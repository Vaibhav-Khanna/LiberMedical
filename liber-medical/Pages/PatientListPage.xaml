<?xml version="1.0" encoding="UTF-8"?>
<custom:BasePage xmlns="http://xamarin.com/schemas/2014/forms" xmlns:custom="clr-namespace:libermedical.CustomControls;assembly=libermedical" xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml" x:Class="libermedical.Pages.PatientListPage" Style="{StaticResource ModalBackgroundColor}">
	<custom:BasePage.ToolbarItems>
		<ToolbarItem Order="Primary" Icon="plus.png" Command="{Binding AddUserCommand}" />
  <ToolbarItem Order="Primary" Icon="back_arrow.png" Command="{Binding AddUserCommand}" />
	</custom:BasePage.ToolbarItems>
	<custom:BasePage.Header>
		<ContentView Style="{StaticResource HeaderFooterBackground}">
			<Grid Padding="5">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="40" />
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="50" />
				</Grid.ColumnDefinitions>
				<Grid Grid.Column="0">
					<Grid.GestureRecognizers>
						<TapGestureRecognizer NumberOfTapsRequired="1" Command="{Binding BackArrowCommand}" />
					</Grid.GestureRecognizers>
					<Image HorizontalOptions="Center" Source="back_arrow.png" VerticalOptions="Center" />
				</Grid>
				<Label HorizontalOptions="Center" VerticalOptions="Center" Grid.Column="0" Grid.ColumnSpan="3" Style="{StaticResource HeaderLabel}" Text="Patients" />
				<Button Grid.Column="2" Image="plus.png" VerticalOptions="Center" Command="{Binding AddCommand}" />
			</Grid>
		</ContentView>
	</custom:BasePage.Header>
	<custom:BasePage.ContentPresenter>
		<ContentView Style="{StaticResource ModalContentBackgroundColor}">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="50" />
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>
				<StackLayout BackgroundColor="#c8c7cc" Grid.Row="0" Padding="8,7" HorizontalOptions="FillAndExpand" Style="{StaticResource BackgroundResearch}">
					<SearchBar Placeholder="Rechercher" Text="{Binding SearchString, Mode=TwoWay}" BackgroundColor="White" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" Style="{StaticResource ResearchBar}" HeightRequest="30" />
				</StackLayout>
				<ListView x:Name="PatientListView" SeparatorVisibility="Default" IsPullToRefreshEnabled="True" Grid.Row="1" Style="{StaticResource StandartListViewStyle}" ItemSelected="Handle_ItemSelected" IsGroupingEnabled="true" GroupDisplayBinding="{Binding HeaderKey}" GroupShortNameBinding="{Binding HeaderKey}">
					<ListView.GroupHeaderTemplate>
						<DataTemplate>
							<ViewCell>
								<Label Text="{Binding HeaderKey}" Margin="10,0,0,0" VerticalOptions="CenterAndExpand" />
							</ViewCell>
						</DataTemplate>
					</ListView.GroupHeaderTemplate>
					<ListView.ItemTemplate>
						<DataTemplate>
							<TextCell Text="{Binding FullName}" TextColor="Black" Tapped="PatientTapped" />
						</DataTemplate>
					</ListView.ItemTemplate>
				</ListView>
			</Grid>
		</ContentView>
	</custom:BasePage.ContentPresenter>
</custom:BasePage>